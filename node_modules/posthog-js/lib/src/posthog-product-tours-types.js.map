{"version":3,"file":"posthog-product-tours-types.js","sourceRoot":"","sources":["../../src/posthog-product-tours-types.ts"],"names":[],"mappings":";;;AAsJa,QAAA,+BAA+B,GAAoC;IAC5E,eAAe,EAAE,SAAS;IAC1B,SAAS,EAAE,SAAS;IACpB,WAAW,EAAE,SAAS;IACtB,YAAY,EAAE,CAAC;IACf,kBAAkB,EAAE,CAAC;IACrB,WAAW,EAAE,SAAS;IACtB,UAAU,EAAE,WAAW;IACvB,SAAS,EAAE,gCAAgC;IAC3C,WAAW,EAAE,IAAI;IACjB,UAAU,EAAE,KAAK;IACjB,qBAAqB,EAAE,IAAI;IAC3B,MAAM,EAAE,UAAU;CACrB,CAAA","sourcesContent":["import { PropertyMatchType } from './types'\nimport { SurveyActionType, SurveyEventWithFilters } from './posthog-surveys-types'\nimport type { InferredSelector } from './extensions/product-tours/element-inference'\nimport { SurveyPosition } from '@posthog/core'\n\nexport interface JSONContent {\n    type?: string\n    attrs?: Record<string, any>\n    content?: JSONContent[]\n    marks?: { type: string; attrs?: Record<string, any> }[]\n    text?: string\n}\n\nexport type ProductTourStepType = 'element' | 'modal' | 'survey' | 'banner'\n\nexport interface ProductTourBannerConfig {\n    behavior: 'sticky' | 'static' | 'custom'\n    selector?: string\n    action?: {\n        type: 'none' | 'link' | 'trigger_tour'\n        link?: string\n        tourId?: string\n    }\n}\n\n/** Button actions available on modal steps */\nexport type ProductTourButtonAction = 'dismiss' | 'link' | 'next_step' | 'previous_step' | 'trigger_tour'\n\nexport interface ProductTourStepButton {\n    text: string\n    action: ProductTourButtonAction\n    /** URL to open when action is 'link' */\n    link?: string\n    /** Tour ID to trigger when action is 'trigger_tour' */\n    tourId?: string\n}\n\nexport interface ProductTourStepButtons {\n    primary?: ProductTourStepButton\n    secondary?: ProductTourStepButton\n}\n\nexport type ProductTourSurveyQuestionType = 'open' | 'rating'\n\nexport interface ProductTourSurveyQuestion {\n    type: ProductTourSurveyQuestionType\n    questionText: string\n    /** Rating display type - emoji or number */\n    display?: 'emoji' | 'number'\n    /** Rating scale - 3 or 5 for emoji, 5 or 10 for number */\n    scale?: 3 | 5 | 10\n    /** Label for low end of rating scale (e.g., \"Not likely\") */\n    lowerBoundLabel?: string\n    /** Label for high end of rating scale (e.g., \"Very likely\") */\n    upperBoundLabel?: string\n}\n\nexport interface ProductTourStep {\n    id: string\n    type: ProductTourStepType\n    selector?: string\n    progressionTrigger: 'button' | 'click'\n    content: JSONContent | null\n    /** Pre-rendered HTML content from the editor. If present, SDK should use this instead of rendering from JSONContent. */\n    contentHtml?: string\n    /** Inline survey question config - if present, this is a survey step */\n    survey?: ProductTourSurveyQuestion\n    /** ID of the auto-created survey for this step (set by backend) */\n    linkedSurveyId?: string\n    /** ID of the survey question (set by backend, used for event tracking) */\n    linkedSurveyQuestionId?: string\n    /** Enhanced element data for more reliable lookup at runtime */\n    inferenceData?: InferredSelector\n    /** Use CSS selector instead of inference. Defaults to false (use inference). */\n    useManualSelector?: boolean\n    /** Maximum tooltip width in pixels (defaults to 320px) */\n    maxWidth?: number\n    /** Position for modal/survey steps (defaults to middle_center) */\n    modalPosition?: SurveyPosition\n    /** Button configuration for modal steps */\n    buttons?: ProductTourStepButtons\n    /** Banner configuration (only for banner steps) */\n    bannerConfig?: ProductTourBannerConfig\n}\n\nexport interface ProductTourConditions {\n    url?: string\n    urlMatchType?: PropertyMatchType\n    selector?: string\n    autoShowDelaySeconds?: number\n    events?: {\n        values: SurveyEventWithFilters[]\n    } | null\n    cancelEvents?: {\n        values: SurveyEventWithFilters[]\n    } | null\n    actions?: {\n        values: SurveyActionType[]\n    } | null\n    linkedFlagVariant?: string\n}\n\nexport interface ProductTourAppearance {\n    backgroundColor?: string\n    textColor?: string\n    buttonColor?: string\n    borderRadius?: number\n    buttonBorderRadius?: number\n    borderColor?: string\n    fontFamily?: string\n    boxShadow?: string\n    showOverlay?: boolean\n    whiteLabel?: boolean\n    /** defaults to true, auto-set to false for announcements/banners */\n    dismissOnClickOutside?: boolean\n    zIndex?: number\n}\n\nexport type ProductTourDisplayFrequency = 'show_once' | 'until_interacted' | 'always'\n\nexport interface ProductTour {\n    id: string\n    name: string\n    description?: string\n    type: 'product_tour'\n    auto_launch?: boolean\n    start_date: string | null\n    end_date: string | null\n    current_iteration?: number\n    conditions?: ProductTourConditions\n    appearance?: ProductTourAppearance\n    steps: ProductTourStep[]\n    internal_targeting_flag_key?: string\n    linked_flag_key?: string\n    display_frequency?: ProductTourDisplayFrequency\n}\n\nexport type ProductTourCallback = (tours: ProductTour[], context?: { isLoaded: boolean; error?: string }) => void\n\nexport type ProductTourSelectorError = 'not_found' | 'multiple_matches' | 'not_visible'\n\nexport type ProductTourDismissReason =\n    | 'user_clicked_skip'\n    | 'user_clicked_outside'\n    | 'escape_key'\n    | 'element_unavailable'\n    | 'container_unavailable'\n\nexport type ProductTourRenderReason = 'auto' | 'api' | 'trigger' | 'event'\n\nexport const DEFAULT_PRODUCT_TOUR_APPEARANCE: Required<ProductTourAppearance> = {\n    backgroundColor: '#ffffff',\n    textColor: '#1d1f27',\n    buttonColor: '#1d1f27',\n    borderRadius: 8,\n    buttonBorderRadius: 6,\n    borderColor: '#e5e7eb',\n    fontFamily: 'system-ui',\n    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n    showOverlay: true,\n    whiteLabel: false,\n    dismissOnClickOutside: true,\n    zIndex: 2147483646,\n}\n\nexport interface ShowTourOptions {\n    reason?: ProductTourRenderReason\n    enableStrictValidation?: boolean\n}\n"]}